# Changelog

## [Unreleased]
### Added
- Добавлены поля `tenantId` (uuid) и `role` (varchar) в таблицу core.user для поддержки мультиарендности и ролевой модели пользователей.
- Создана миграция для этих изменений (TypeORM).
- Описана строгая типизация для User в dtos/user.type.ts.
- Созданы модульные тесты для CRUD-операций с моделью User (user.service.spec.ts и user.resolver.spec.ts) с покрытием 100% для основных операций.
- Настроено окружение для E2E-тестирования с использованием Playwright.
- Подключён Swagger (OpenAPI) для REST/GraphQL API. Документация доступна по адресу /api/docs. Описаны все поля и CRUD-операции пользователя с примерами и описаниями.
- Доработана модель Role: добавлена Swagger-документация, созданы тесты для CRUD-операций, добавлена миграция для поля tenantId. Все изменения внесены в существующую сущность, а не создана новая.

### Changed
- Исправлена конфигурация docker-compose.yml: добавлен проброс порта 5432 для PostgreSQL, чтобы база была доступна с хоста для миграций, тестов и отладки.
- Временно вносились изменения в core.datasource.ts для отладки подключения, но возвращено к использованию переменной окружения PG_DATABASE_URL.
- Исправлены тесты для User-модели для корректной работы с моками репозитория.

### Fixed
- Проблема с невозможностью запуска миграций из-за отсутствия проброса порта 5432. Теперь миграции и работа с БД возможны как из контейнера, так и с хоста.
- Проблема с командой `cp` в Windows при настройке E2E-тестов (заменена на `copy`).

---

## [История изменений см. выше]
