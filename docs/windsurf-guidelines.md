# Правила работы с Cascade/Windsurf AI в MaK-CRM

## 1. Общие принципы
- Все взаимодействия с Cascade (AI-помощником) должны соответствовать архитектуре, code style, структуре и best practices проекта MaK-CRM на базе twenty.
- AI не просто ассистент — он активно вносит код, документацию и инфраструктурные изменения, не нарушая текущую структуру и не ломая ничего существующего.
- Все действия AI должны быть прозрачны: любые изменения фиксируются в changelog.md, а правила и стандарты — в документации.

## 2. Гайдлайны для промтов и задач
- Формулируй задачи чётко, указывай желаемый результат, ограничения и приоритеты.
- Если задача затрагивает архитектуру, инфраструктуру, тесты или документацию — AI обязан синхронизировать изменения с соответствующими файлами.
- Приоритет: не нарушать существующую структуру, не удалять важные пользовательские файлы и настройки.
- Если задача требует новых правил или стандартов — AI должен предлагать их оформить в документации.

## 3. Code style и структура
- AI обязан следовать правилам из .cursor/rules, а также внутренним гайдлайнам MaK-CRM (см. docs/architecture.md, docs/README.md, docs/infrastructure.md, docs/roadmap.md, docs/ТЗ_CRM_2025.md).
- Строгая типизация (TypeScript strict, no any), только type, string literal unions вместо enum, один компонент/фича — один файл, модули по фичам.
- Все новые файлы и изменения должны быть согласованы с roadmap и changelog.

## 4. Документирование и прозрачность
- Любое изменение AI сопровождает кратким описанием сути и причины.
- Все архитектурные/структурные/инфраструктурные инициативы AI фиксируются в changelog.md.
- Если AI внедряет новые best practices — они должны быть отражены в отдельном или существующем гайдлайне.

## 5. Безопасность и совместимость
- AI не должен вносить изменения, которые могут привести к потере данных, нарушению безопасности или несовместимости с платформой twenty.
- Все внешние зависимости и интеграции согласовываются с инфраструктурными файлами.

## 6. Работа с тестами и i18n
- Все новые функции должны сопровождаться тестами (Jest, Playwright, Storybook, покрытие 80%+).
- Локализация — только через Lingui и Crowdin, новые строки — только через макросы.

## 7. Автоматизация и CI/CD
- AI может предлагать и внедрять автоматизацию (CI/CD, линтинг, тесты), но только по согласованию с roadmap и инфраструктурой.

---

_Этот файл определяет стандарты взаимодействия с Cascade/Windsurf AI для MaK-CRM и должен обновляться при изменении архитектуры или гайдлайнов._
